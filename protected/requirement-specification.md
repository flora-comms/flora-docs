# Requirement Specification

***Version: 1.1***

Requirements for FloraNet, deliverable Dec 13th, 2024.

See the legend below Table 1 for how items are indexed.

## Table 1 - Requirements & Features

_TABLE 1_: Requirement specifications and features, their tests, and their pass fail criteria. Features do not get a grade, only a Complete (C) or Not Complete (NC)

|Reference Number            |Requirement                                                                                                                                  |Test                                                                                                                                                                                                                                    |Criteria                                                                                                                                                                                                                       |Pass/Fail|
|----------------------------|---------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------|
|1-SW: Accessibility         |R1 – The user interface MUST be accessible through a modern web browser without the need for a separate application.                         |T1.0 – Connect a smartphone with a modern browser to the node and navigate to floranet.local.                                                                                                                                            |C1.0 – UI is rendered and readable on a mobile device.                                                                                                                                                                         |PASS     |
|                            |                                                                                                                                             |T1.1 – Connect a PC to the node and navigate to floranet.local.                                                                                                                                                                          |C1.1 – UI is rendered and readable on a PC.                                                                                                                                                                                    |PASS     |
|2-SW: Sending & Receiving   |R1 – Users MUST be able to send LoRa packets using the web interface from one device to another.                                             |T1 – Send a message using the UI to another node                                                                                                                                                                                        |C1 – The sent message is shown on the other device's UI                                                                                                                                                                        |PASS     |
|3-SW: Chronology            |R1 – Chats on UI must have a username or device identifier and appear in the order the messages were received.                               |T1 – Send chat messages from multiple devices over the UI                                                                                                                                                                               |C1 – The UI renders chat history with usernames in chronological order according to the time the message was received.                                                                                                         |PASS     |
|4-HW: Low Voltage Disconnect|R1 – The repeater node MUST monitor battery voltage and disconnect when dropping below the low voltage threshold.                            |T1 – Supply voltage to the node with a variable power supply and document which voltages result in disconnect and reconnect. The node voltage monitor will be compared to that of the power supply and measured with an external meter. |C1.0 – The reported battery voltage is accurate within 3%.                                                                                                                                                                     |PASS     |
|                            |R2 – The repeater node low-voltage disconnect MUST implement hysteresis to prevent power cycling.                                            |                                                                                                                                                                                                                                        |C1.1 – The load disconnects when the battery voltage drops below the low voltage threshold and turns back on when the battery charges above threshold voltage. The implemented hysteresis prevents power cycling of the device.|PASS     |
|                            |F1 – The repeater SHOULD indicate to the rest of the mesh network that it is powering down.                                                  |                                                                                                                                                                                                                                        |FC1 – Before the low-voltage disconnect, the device transmits an alert that it is powering down.                                                                                                                               |NC       |
|5-SW: Network Reliability   |R1 – The software MUST implement a collision avoidance or multiple access protocol that deals with the hidden-node problem                   |T1 – Transmit a LoRa packet from two devices to a single receiver at the same time without a connection between the two senders to coordinate between them                                                                              |C1.0 – Packet loss of less than 15%.                                                                                                                                                                                           |PASS     |
|                            |                                                                                                                                             |                                                                                                                                                                                                                                        |C1.1 – Messages are displayed in the UI in the correct order.                                                                                                                                                                  |PASS     |
|6-HW: PCB Design            |R1 –  MUST Design and order a PCB                                                                                                            |T1 – Before each revision is submitted for manufacturing, it will be subject to an internal review by the group and an external review by the Capstone Committee.                                                                       |C1 – The PCB design passes an internal review process and review from the Capstone Committee.                                                                                                                                  |PASS     |
|7-HW: Enclosure             |R1 – MUST have a bespoke enclosure.                                                                                                          |T1 – The enclosure will be inspected by professors.                                                                                                                                                                                     |C1 – All third-party enclosure components have IPX4 or greater certification.                                                                                                                                                  |PASS     |
|                            |F1 – SHOULD be protected against rain and moisture ingress                                                                                   |T2 – Third-party parts like cable glands are IPX4 certified.                                                                                                                                                                            |                                                                                                                                                                                                                               |NC       |
|8-HW: Power Supply          |R1 – Voltage regulator MUST effectively provide the required 3.3V to the hardware for a range of typical battery voltages.                   |T1 – Input a range of voltages from 3.8V-20V and measure the voltage regulator output.                                                                                                                                                  |C1.0 – The hardware receives a stable 3.3V +/- 0.1V out across the range of test voltages.                                                                                                                                     |PASS     |
|                            |                                                                                                                                             |                                                                                                                                                                                                                                        |C1.1 – The output voltage, ripple voltage, and load transient response meets the hardware specifications provided by the manufacture in the datasheet.                                                                         |PASS     |
|9-HW: User Manual           |R1 – MUST provide recommendations for sizing batteries and solar panels based on expected insolation.                                        |T1 – Use recommendations to size solar and battery power for a mock installation at Camosun College using insolation data for that location.                                                                                            |C1 - Recommended panel wattages and battery Ah meet or exceed node requirements as calculated by our power audit (datasheet specifications, duty cycle, solar insolation modeling)                                             |PASS     |
|10-HW: RF                   |R1 – Antennas MUST be well matched to the driving Hardware                                                                                   |T1 – SWR/Impedance testing of antenna and source using VNA (may require tuning to meet these requirements)                                                                                                                              |C1 – Source impedance is matched to antenna so that VSWR < 2 and return loss < -10 dB at some point between 900-928MHz.                                                                                                        |PASS     |
|11-HW: Wi-Fi Timeout        |R1 – Nodes MUST incorporate an accessible user button at access points for users to initiate the web server.                                 |T1 – Check that the Wi-Fi access point is powered down. Press the user button to initiate the Wi-Fi access point.                                                                                                                       |C1 – The Wi-Fi access point is available after pressing the user button.                                                                                                                                                       |PASS     |
|                            |R2 – The Wi-Fi access point MUST time-out after 5 minutes of inactivity to save power.                                                       |T2 – Leave the access point for 5 minutes without activity.                                                                                                                                                                             |C2 – The Wi-Fi access point is disabled after 5 minutes of inactivity.                                                                                                                                                         |PASS     |
|12- SW: Power Saving        |R1 – The firmware has multiple power consumption modes to conserve battery.                                                                  |T1 – Measure node current draw when access point is up and when it is down.                                                                                                                                                             |C1 – The current draw in AP down mode is less than the current draw in active mode.                                                                                                                                            |PASS     |
|                            |F1 – An RGB LED indicates the state the hardware is in with different colours (Passive, New message Available, Active, Waiting, Low battery) |                                                                                                                                                                                                                                        |FC1.0 – The LED indicates a New Message state.                                                                                                                                                                                 |C        |
|                            |                                                                                                                                             |                                                                                                                                                                                                                                        |FC1.1 – The LED indicates low voltage.                                                                                                                                                                                         |NC       |

## Legend

How to reference Table 1.

**Reference Number**

_#-(ID):_

HW: Indicates a hardware requirement 

SW: Indicates a software requirement

**Requirement**

_R#:_

A requirement, something the component MUST have, followed by an identification number that begins at 0.

_F#:_

A feature, something the component SHOULD have, followed by an identification number that begins at 0.

**Test**

_T#.#:_

The test identification number. The number matches the requirement it corresponds to. If multiple tests relate to the same requirement, a second reference number is added with a decimal point.

_FT.#.#:_

Same as requirement tests but relates to a feature. 

**Criteria**

_C#.#.#:_

The criteria identification number. The number matches the test it corresponds to. If multiple criteria exist for the same test, a second sub-reference number is added. A Pass is required.

_FC.#.#.#:_

Same as requirement criteria but relates to a feature and is not required to pass.